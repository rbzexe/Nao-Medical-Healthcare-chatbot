<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MediTranslate - Medical Translation App</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --medical-blue: #1A73E8;
      --medical-teal: #00BFA5;
      --medical-purple: #8E24AA;
      --medical-green: #34A853;
      --medical-red: #EA4335;
      --medical-light: #E8F0FE;
      --medical-white: #FFFFFF;
      --medical-gray: #F8F9FA;
    }
    
    body {
      background: linear-gradient(135deg, var(--medical-light) 0%, var(--medical-white) 50%, #E3F2FD 100%);
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    /* Medical-themed bubble animation */
    .bubbles {
      position: absolute;
      width: 100%;
      height: 100%;
      z-index: 0;
      overflow: hidden;
      top: 0;
      left: 0;
      pointer-events: none;
    }
    
    .bubble {
      position: absolute;
      bottom: -100px;
      border-radius: 50%;
      opacity: 0.5;
      animation: rise 15s infinite ease-in;
    }
    
    .bubble:nth-child(1) { background-color: rgba(26, 115, 232, 0.1); }
    .bubble:nth-child(2) { background-color: rgba(0, 191, 165, 0.1); }
    .bubble:nth-child(3) { background-color: rgba(142, 36, 170, 0.1); }
    .bubble:nth-child(4) { background-color: rgba(52, 168, 83, 0.1); }
    .bubble:nth-child(5) { background-color: rgba(234, 67, 53, 0.1); }
    .bubble:nth-child(6) { background-color: rgba(26, 115, 232, 0.1); }
    .bubble:nth-child(7) { background-color: rgba(0, 191, 165, 0.1); }
    .bubble:nth-child(8) { background-color: rgba(142, 36, 170, 0.1); }
    
    @keyframes rise {
      0% {
        bottom: -100px;
        transform: translateX(0) scale(0.5);
      }
      50% {
        transform: translate(100px, -500px) scale(1.2);
      }
      100% {
        bottom: 1080px;
        transform: translateX(-200px) scale(0.8);
      }
    }
    
    /* Create multiple bubbles with different properties */
    .bubble:nth-child(1) {
      width: 40px;
      height: 40px;
      left: 10%;
      animation-duration: 12s;
      animation-delay: 0s;
    }
    
    .bubble:nth-child(2) {
      width: 20px;
      height: 20px;
      left: 20%;
      animation-duration: 16s;
      animation-delay: 1s;
    }
    
    .bubble:nth-child(3) {
      width: 50px;
      height: 50px;
      left: 35%;
      animation-duration: 14s;
      animation-delay: 2s;
    }
    
    .bubble:nth-child(4) {
      width: 30px;
      height: 30px;
      left: 50%;
      animation-duration: 18s;
      animation-delay: 0s;
    }
    
    .bubble:nth-child(5) {
      width: 35px;
      height: 35px;
      left: 70%;
      animation-duration: 15s;
      animation-delay: 3s;
    }
    
    .bubble:nth-child(6) {
      width: 45px;
      height: 45px;
      left: 80%;
      animation-duration: 13s;
      animation-delay: 2s;
    }
    
    .bubble:nth-child(7) {
      width: 25px;
      height: 25px;
      left: 65%;
      animation-duration: 17s;
      animation-delay: 1s;
    }
    
    .bubble:nth-child(8) {
      width: 60px;
      height: 60px;
      left: 25%;
      animation-duration: 19s;
      animation-delay: 4s;
    }
    
    /* Pulse animation for mic */
    .pulse { 
      animation: pulse 1.5s infinite ease-in-out; 
    }
    
    @keyframes pulse { 
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.3); opacity: 0.7; } 
    }
    
    /* Wave animation for sound bars */
    .bar { 
      width: 4px; 
      height: 10px; 
      margin: 0 2px; 
      background: var(--medical-blue); 
      display: inline-block; 
      border-radius: 2px; 
      animation: wave 1.2s infinite ease-in-out;
    }
    
    .bar:nth-child(1) { animation-delay: 0s; } 
    .bar:nth-child(2) { animation-delay: 0.2s; } 
    .bar:nth-child(3) { animation-delay: 0.4s; } 
    .bar:nth-child(4) { animation-delay: 0.6s; } 
    .bar:nth-child(5) { animation-delay: 0.8s; }
    
    @keyframes wave { 
      0%, 100% { height: 8px; } 
      50% { height: 20px; } 
    }
    
    /* Glassmorphism effect */
    .glass {
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.18);
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
      transition: all 0.3s ease;
    }
    
    .glass:hover {
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
      transform: translateY(-2px);
    }
    
    /* Content container */
    .content-container {
      position: relative;
      z-index: 1;
    }
    
    /* Button styles */
    .btn-primary {
      background: var(--medical-blue);
      color: white;
      transition: all 0.3s ease;
    }
    
    .btn-primary:hover {
      background: #1557B0;
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(26, 115, 232, 0.2);
    }
    
    .btn-secondary {
      background: var(--medical-teal);
      color: white;
      transition: all 0.3s ease;
    }
    
    .btn-secondary:hover {
      background: #009688;
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(0, 191, 165, 0.2);
    }
    
    .btn-success {
      background: var(--medical-green);
      color: white;
      transition: all 0.3s ease;
    }
    
    .btn-success:hover {
      background: #2E8B57;
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(52, 168, 83, 0.2);
    }
    
    .btn-danger {
      background: var(--medical-red);
      color: white;
      transition: all 0.3s ease;
    }
    
    .btn-danger:hover {
      background: #D32F2F;
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(234, 67, 53, 0.2);
    }
    
    /* Page transition */
    .page {
      display: none;
      animation: fadeIn 0.8s ease forwards;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .active {
      display: block;
    }
    
    /* Text animation */
    .fade-in {
      animation: fadeInText 0.8s ease forwards;
    }
    
    @keyframes fadeInText {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    /* Custom select styles */
    select {
      background: rgba(255, 255, 255, 0.9);
      transition: all 0.3s ease;
    }
    
    select:hover {
      background: rgba(255, 255, 255, 1);
      box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.2);
    }
    
    /* Transcript styles */
    .transcript-box {
      transition: all 0.5s ease;
      min-height: 100px;
    }
    
    .message {
      padding: 10px 15px;
      border-radius: 18px;
      margin-bottom: 12px;
      max-width: 90%;
      animation: messageAppear 0.5s ease forwards;
      opacity: 0;
      transform: translateY(10px);
    }
    
    @keyframes messageAppear {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .original-message {
      background: var(--medical-light);
      border-bottom-left-radius: 4px;
      align-self: flex-start;
      text-align: left;
    }
    
    .translated-message {
      background: #E8F5E9;
      border-bottom-right-radius: 4px;
      align-self: flex-end;
      text-align: right;
      margin-left: auto;
    }
    
    /* Status animation */
    #status {
      transition: all 0.5s ease;
    }
    
    /* Floating animation */
    .floating {
      animation: floating 3s ease-in-out infinite;
    }
    
    @keyframes floating {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    /* Navbar styles */
    .nav-container {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
    }
    
    .nav-pill {
      background: rgba(255, 255, 255, 0.8);
      border-radius: 50px;
      padding: 5px;
      display: inline-flex;
      backdrop-filter: blur(10px);
    }
    
    .nav-item {
      padding: 10px 20px;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;
    }
    
    .nav-item.active {
      background: var(--medical-blue);
      color: white;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    
    /* Language select styles */
    .lang-select {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 12px;
      padding: 12px 16px;
      border: 1px solid #E5E7EB;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
    }
    
    .lang-select:hover {
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
      transform: translateY(-2px);
    }
    
    .lang-select option {
      padding: 8px;
    }
    
    /* Medical Icons */
    .medical-icon {
      font-size: 1.2em;
      margin-right: 8px;
    }
    
    /* Emergency button */
    .emergency-btn {
      background: linear-gradient(45deg, var(--medical-red), #FF6B6B);
      color: white;
      transition: all 0.3s ease;
    }
    
    .emergency-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 10px 25px rgba(234, 67, 53, 0.3);
    }
    
    /* Medical card styles */
    .medical-card {
      border-left: 4px solid var(--medical-blue);
      background: rgba(255, 255, 255, 0.9);
    }
    
    .symptom-card {
      border-left: 4px solid var(--medical-teal);
      background: rgba(255, 255, 255, 0.9);
    }
    
    .treatment-card {
      border-left: 4px solid var(--medical-green);
      background: rgba(255, 255, 255, 0.9);
    }
    
    /* Medical color accents */
    .text-medical-blue { color: var(--medical-blue); }
    .text-medical-teal { color: var(--medical-teal); }
    .text-medical-purple { color: var(--medical-purple); }
    .text-medical-green { color: var(--medical-green); }
    .text-medical-red { color: var(--medical-red); }
    
    .bg-medical-blue { background-color: var(--medical-blue); }
    .bg-medical-teal { background-color: var(--medical-teal); }
    .bg-medical-purple { background-color: var(--medical-purple); }
    .bg-medical-green { background-color: var(--medical-green); }
    .bg-medical-red { background-color: var(--medical-red); }
  </style>
</head>
<body class="flex flex-col min-h-screen">

  <!-- Medical-themed Bubble background -->
  <div class="bubbles">
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
  </div>

  <!-- Navbar -->
  <nav class="bg-white shadow-md sticky top-0 z-50">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <h1 class="text-xl font-bold text-medical-blue flex items-center">
        <i class="fas fa-stethoscope mr-2 text-medical-blue"></i> MediTranslate - Healthcare Translation
      </h1>
      <div class="flex items-center">
        <span class="text-sm text-gray-600 mr-4">Developer: Rohit Bisht</span>
        <button class="emergency-btn px-4 py-2 rounded-lg font-medium">
          <i class="fas fa-ambulance mr-2"></i> Emergency
        </button>
      </div>
    </div>
  </nav>

  <!-- Navigation Pills -->
  <div class="nav-container mt-6">
    <div class="nav-pill">
      <div class="nav-item active" data-page="home">Translation</div>
      <div class="nav-item" data-page="medical">Medical Terms</div>
      <div class="nav-item" data-page="about">About</div>
      <div class="nav-item" data-page="contact">Contact</div>
    </div>
  </div>

  <!-- Home Page (Translation) -->
  <main id="home-page" class="page active content-container flex-1 max-w-6xl mx-auto w-full px-4 py-8">
    <header class="mb-8 flex items-center justify-between flex-wrap gap-4">
      <div class="glass rounded-2xl p-6 floating">
        <h2 class="text-3xl font-bold text-medical-blue">Medical Translation <i class="fas fa-language ml-2"></i></h2>
        <p class="text-gray-700 mt-2">Breaking language barriers between doctors and patients</p>
      </div>
      <!-- Mic indicator -->
      <div id="micIndicator" class="hidden items-center gap-3 text-medical-blue glass rounded-2xl p-4">
        <div class="w-4 h-4 bg-medical-blue rounded-full pulse"></div>
        <span class="text-sm font-medium">Recording...</span>
        <div class="flex items-end h-6">
          <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
        </div>
      </div>
    </header>

    <!-- Controls -->
    <div class="flex flex-wrap items-center gap-4 mb-8 glass rounded-2xl p-6">
      <label class="flex flex-col text-sm flex-1 min-w-[160px]">
        <span class="font-medium mb-1 text-gray-700"><i class="fas fa-user-md medical-icon text-medical-blue"></i> Doctor Language</span>
        <select id="sourceLang" class="lang-select">
          <option value="en-US">üá∫üá∏ English</option>
          <option value="hi-IN">üáÆüá≥ Hindi</option>
          <option value="es-ES">üá™üá∏ Spanish</option>
          <option value="fr-FR">üá´üá∑ French</option>
          <option value="zh-CN">üá®üá≥ Chinese</option>
          <option value="ar-SA">üá∏üá¶ Arabic</option>
        </select>
      </label>

      <label class="flex flex-col text-sm flex-1 min-w-[160px]">
        <span class="font-medium mb-1 text-gray-700"><i class="fas fa-user medical-icon text-medical-teal"></i> Patient Language</span>
        <select id="targetLang" class="lang-select">
          <option value="hi">üáÆüá≥ Hindi</option>
          <option value="en" selected>üá∫üá∏ English</option>
          <option value="es">üá™üá∏ Spanish</option>
          <option value="fr">üá´üá∑ French</option>
          <option value="zh">üá®üá≥ Chinese</option>
          <option value="ar">üá∏üá¶ Arabic</option>
        </select>
      </label>

      <div class="flex flex-wrap gap-3 mt-4 w-full justify-center">
        <button id="startBtn" class="btn-primary px-5 py-3 rounded-xl font-medium">
          <i class="fas fa-play-circle mr-2"></i> Start Translation
        </button>
        <button id="stopBtn" class="btn-danger px-5 py-3 rounded-xl font-medium">
          <i class="fas fa-stop-circle mr-2"></i> Stop
        </button>
        <button id="clearBtn" class="btn-secondary px-5 py-3 rounded-xl font-medium">
          <i class="fas fa-broom mr-2"></i> Clear
        </button>
        <button id="speakBtn" class="btn-success px-5 py-3 rounded-xl font-medium">
          <i class="fas fa-volume-up mr-2"></i> Speak Translation
        </button>
      </div>
    </div>

    <!-- Panels -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
      <div class="glass rounded-2xl p-6 transcript-box flex flex-col">
        <h3 class="font-semibold mb-4 text-medical-blue text-lg">
          <i class="fas fa-user-md medical-icon"></i> Doctor's Message
        </h3>
        <div id="originalText" class="space-y-3 flex-1 overflow-y-auto"></div>
      </div>
      <div class="glass rounded-2xl p-6 transcript-box flex flex-col">
        <h3 class="font-semibold mb-4 text-medical-teal text-lg">
          <i class="fas fa-user medical-icon"></i> Patient's Translation
        </h3>
        <div id="translatedText" class="space-y-3 flex-1 overflow-y-auto"></div>
      </div>
    </div>

    <!-- Status -->
    <p id="status" class="text-sm text-gray-700 glass rounded-2xl p-4 text-center">
      <!-- <i class="fas fa-info-circle mr-2"></i> Status: idle -->
    </p>
  </main>

  <!-- Medical Terms Page -->
  <main id="medical-page" class="page content-container flex-1 max-w-6xl mx-auto w-full px-4 py-8">
    <div class="glass rounded-2xl p-8 mb-8">
      <h2 class="text-3xl font-bold text-medical-blue mb-6">
        <i class="fas fa-book-medical mr-3"></i> Common Medical Terms
      </h2>
      <p class="text-gray-700 mb-6">Quick reference for common medical terms that can be translated using this app.</p>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div class="medical-card p-5 rounded-xl">
          <h3 class="font-bold text-lg text-medical-blue mb-3">Symptoms</h3>
          <ul class="space-y-2 text-gray-700">
            <li><i class="fas fa-thermometer-half text-medical-red mr-2"></i> Fever</li>
            <li><i class="fas fa-head-side-cough text-medical-purple mr-2"></i> Cough</li>
            <li><i class="fas fa-dizzy text-medical-teal mr-2"></i> Dizziness</li>
            <li><i class="fas fa-lungs text-medical-blue mr-2"></i> Shortness of breath</li>
            <li><i class="fas fa-pain-scale text-medical-red mr-2"></i> Pain</li>
          </ul>
        </div>
        
        <div class="symptom-card p-5 rounded-xl">
          <h3 class="font-bold text-lg text-medical-teal mb-3">Diagnoses</h3>
          <ul class="space-y-2 text-gray-700">
            <li><i class="fas fa-virus text-medical-red mr-2"></i> Infection</li>
            <li><i class="fas fa-heartbeat text-medical-red mr-2"></i> Hypertension</li>
            <li><i class="fas fa-syringe text-medical-blue mr-2"></i> Diabetes</li>
            <li><i class="fas fa-lungs-virus text-medical-purple mr-2"></i> Asthma</li>
            <li><i class="fas fa-brain text-medical-teal mr-2"></i> Migraine</li>
          </ul>
        </div>
        
        <div class="treatment-card p-5 rounded-xl">
          <h3 class="font-bold text-lg text-medical-green mb-3">Treatments</h3>
          <ul class="space-y-2 text-gray-700">
            <li><i class="fas fa-pills text-medical-blue mr-2"></i> Medication</li>
            <li><i class="fas fa-procedures text-medical-teal mr-2"></i> Surgery</li>
            <li><i class="fas fa-band-aid text-medical-green mr-2"></i> Dressing</li>
            <li><i class="fas fa-prescription-bottle text-medical-purple mr-2"></i> Prescription</li>
            <li><i class="fas fa-stethoscope text-medical-blue mr-2"></i> Examination</li>
          </ul>
        </div>
      </div>
    </div>
    
    <div class="glass rounded-2xl p-8">
      <h2 class="text-3xl font-bold text-medical-purple mb-6">
        <i class="fas fa-comment-medical mr-3"></i> Common Medical Questions
      </h2>
      <div class="space-y-4 text-gray-700">
        <div class="bg-blue-50 p-4 rounded-xl">
          <p class="font-medium text-medical-blue"><i class="fas fa-question-circle mr-2"></i> "Where does it hurt?"</p>
          <p class="text-sm mt-2">Use this to ask patients about the location of their pain or discomfort.</p>
        </div>
        
        <div class="bg-green-50 p-4 rounded-xl">
          <p class="font-medium text-medical-green"><i class="fas fa-question-circle mr-2"></i> "How long have you had these symptoms?"</p>
          <p class="text-sm mt-2">Important for understanding the duration and progression of an illness.</p>
        </div>
        
        <div class="bg-purple-50 p-4 rounded-xl">
          <p class="font-medium text-medical-purple"><i class="fas fa-question-circle mr-2"></i> "Are you allergic to any medications?"</p>
          <p class="text-sm mt-2">Critical safety question before prescribing any treatment.</p>
        </div>
        
        <div class="bg-teal-50 p-4 rounded-xl">
          <p class="font-medium text-medical-teal"><i class="fas fa-question-circle mr-2"></i> "Do you have any existing medical conditions?"</p>
          <p class="text-sm mt-2">Helps understand the patient's medical history for accurate diagnosis.</p>
        </div>
      </div>
    </div>
  </main>

  <!-- About Page -->
  <main id="about-page" class="page content-container flex-1 max-w-4xl mx-auto w-full px-4 py-8">
    <div class="glass rounded-2xl p-8">
      <h2 class="text-3xl font-bold text-medical-blue mb-6">
        <i class="fas fa-info-circle mr-3"></i> About MediTranslate
      </h2>
      <div class="space-y-5 text-gray-700">
        <p class="text-lg">MediTranslate is a specialized real-time translation application designed specifically for healthcare settings to bridge communication gaps between doctors and patients who speak different languages.</p>
        
        <p>In medical situations, clear communication is critical for accurate diagnosis, treatment, and patient comfort. This application helps eliminate language barriers by providing real-time speech translation of medical terminology, symptoms, diagnoses, and treatment instructions.</p>
        
        <p>Our mission is to ensure that every patient receives proper medical care regardless of language differences, and that healthcare providers can communicate effectively with all patients.</p>
        
        <div class="bg-blue-50 p-5 rounded-2xl border-l-4 border-medical-blue mt-6">
          <p class="font-medium text-medical-blue text-lg">
            <i class="fas fa-lightbulb mr-2"></i> This application was developed by Rohit Bisht.
          </p>
          <p class="text-sm mt-3">
            <i class="fas fa-rocket mr-2"></i> The goal is to improve healthcare outcomes through better understanding between medical professionals and patients from diverse linguistic backgrounds.
          </p>
        </div>
      </div>
    </div>
  </main>

  <!-- Contact Page -->
  <main id="contact-page" class="page content-container flex-1 max-w-4xl mx-auto w-full px-4 py-8">
    <div class="glass rounded-2xl p-8">
      <h2 class="text-3xl font-bold text-medical-blue mb-6">
        <i class="fas fa-envelope mr-3"></i> Contact Developer
      </h2>
      <div class="space-y-5 text-gray-700">
        <div class="bg-blue-50 p-5 rounded-2xl border-l-4 border-medical-blue">
          <p class="font-medium text-medical-blue text-lg">
            <i class="fas fa-user-md mr-2"></i> Rohit Bisht - Healthcare Translation App Developer
          </p>
          <p class="mt-3">
            This application was created specifically to address the critical need for accurate medical translation in healthcare settings where language barriers can impact patient care.
          </p>
        </div>
        
        <p>
          <i class="fas fa-clock mr-2"></i> For more information about this medical translation solution, please reach out:
        </p>
        
        <div class="bg-green-50 p-5 rounded-2xl">
          <p class="font-semibold text-medical-green">
            <i class="fas fa-envelope mr-2"></i> Email: animeboy252003@gmail.com
          </p>
          <p class="font-semibold text-medical-green mt-3">
            <i class="fas fa-globe mr-2"></i> Mob No: +91-6398720297
          </p>
          <p class="font-semibold text-medical-green mt-3">
            <i class="fas fa-map-marker-alt mr-2"></i> Location: India
          </p>
        </div>
        
        <p>
          <i class="fas fa-thumbs-up mr-2"></i> We appreciate your interest in our medical translation solution and look forward to improving healthcare communication worldwide.
        </p>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-white border-t py-6 mt-8">
    <div class="max-w-6xl mx-auto px-4 text-center text-sm text-gray-700">
      <p>¬© 2025 MediTranslate - Medical Healthcare Translation App. Developed by Rohit Bisht.</p>
      <p class="mt-2">
        <i class="fas fa-heartbeat text-medical-red mr-1"></i> Bridging language gaps in healthcare for better patient outcomes
      </p>
    </div>
  </footer>

<script>
// Page navigation
function navigateToPage(pageId) {
  document.querySelectorAll('.page').forEach(page => {
    page.classList.remove('active');
  });
  document.getElementById(pageId + '-page').classList.add('active');
  
  // Update active link
  document.querySelectorAll('.nav-item').forEach(item => {
    item.classList.remove('active');
  });
  
  document.querySelector(`.nav-item[data-page="${pageId}"]`).classList.add('active');
}

document.querySelectorAll('.nav-item').forEach(item => {
  item.addEventListener('click', (e) => {
    const pageId = e.target.getAttribute('data-page');
    navigateToPage(pageId);
  });
});

// App functionality
const startBtn = document.getElementById('startBtn');
const stopBtn = document.getElementById('stopBtn');
const clearBtn = document.getElementById('clearBtn');
const speakBtn = document.getElementById('speakBtn');
const originalTextDiv = document.getElementById('originalText');
const translatedTextDiv = document.getElementById('translatedText');
const statusDiv = document.getElementById('status');
const srcSelect = document.getElementById('sourceLang');
const tgtSelect = document.getElementById('targetLang');
const micIndicator = document.getElementById('micIndicator');

let recognition = null;
let isRecording = false;
let lastTranslatedSegment = '';

function updateStatus(t){ 
  statusDiv.innerHTML = `<i class="fas fa-info-circle mr-2"></i> Status: ${t}`;
  statusDiv.classList.add('fade-in');
  setTimeout(() => statusDiv.classList.remove('fade-in'), 500);
}

function showMic(show){ 
  micIndicator.classList.toggle("hidden", !show); 
  if (show) {
    micIndicator.classList.add('fade-in');
  }
}

// Add emoji based on medical text content
function addMedicalEmoji(text) {
  const medicalTerms = [
    {term: 'pain', emoji: 'üò´'},
    {term: 'hurt', emoji: 'ü§ï'},
    {term: 'fever', emoji: 'ü§í'},
    {term: 'headache', emoji: 'ü§ï'},
    {term: 'medicine', emoji: 'üíä'},
    {term: 'doctor', emoji: 'üë®‚Äç‚öïÔ∏è'},
    {term: 'hospital', emoji: 'üè•'},
    {term: 'ambulance', emoji: 'üöë'},
    {term: 'heart', emoji: '‚ù§Ô∏è'},
    {term: 'lungs', emoji: 'ü´Å'},
    {term: 'stomach', emoji: 'ü´Ä'},
    {term: 'allergy', emoji: 'ü§ß'},
    {term: 'cough', emoji: 'üòÆ‚Äçüí®'},
    {term: 'surgery', emoji: 'ü©∫'},
    {term: 'injection', emoji: 'üíâ'},
    {term: 'blood', emoji: 'ü©∏'},
    {term: 'test', emoji: 'üß™'},
    {term: 'x-ray', emoji: 'üìã'},
    {term: 'emergency', emoji: 'üö®'},
    {term: 'better', emoji: 'üôÇ'},
    {term: 'worse', emoji: 'üòî'},
    {term: 'thank', emoji: 'üôè'},
    {term: 'help', emoji: 'üÜò'},
    {term: 'appointment', emoji: 'üìÖ'},
    {term: 'prescription', emoji: 'üìù'},
  ];
  
  let emojiToAdd = '';
  const lowerText = text.toLowerCase();
  
  for (const {term, emoji} of medicalTerms) {
    if (lowerText.includes(term)) {
      emojiToAdd = emoji;
      break;
    }
  }
  
  // Default emoji if no specific term found
  if (!emojiToAdd) {
    const textLength = text.length;
    if (textLength < 10) emojiToAdd = 'üí¨';
    else if (textLength < 20) emojiToAdd = 'üó£Ô∏è';
    else emojiToAdd = 'üìã';
  }
  
  return emojiToAdd + ' ' + text;
}

if (!('SpeechRecognition' in window) && !('webkitSpeechRecognition' in window)) {
  updateStatus('‚ùå SpeechRecognition not supported in this browser.');
  startBtn.disabled = true;
}

startBtn.addEventListener('click', startRecognition);
stopBtn.addEventListener('click', stopRecognition);
clearBtn.addEventListener('click', () => {
  originalTextDiv.innerHTML = '';
  translatedTextDiv.innerHTML = '';
  lastTranslatedSegment = '';
});
speakBtn.addEventListener('click', () => {
  if (lastTranslatedSegment) speakText(lastTranslatedSegment);
  else speakText(translatedTextDiv.innerText || '');
});

function startRecognition(){
  if (isRecording) return;
  const srcLang = srcSelect.value;
  const SpeechRec = window.SpeechRecognition || window.webkitSpeechRecognition;
  recognition = new SpeechRec();
  recognition.lang = srcLang;
  recognition.interimResults = true;
  recognition.continuous = true;

  recognition.onstart = () => { 
    isRecording = true; 
    updateStatus('üé§ Recording medical conversation...'); 
    startBtn.disabled = true; 
    showMic(true); 
  };
  recognition.onerror = (e) => { updateStatus('‚ö†Ô∏è Error: ' + e.error); };
  recognition.onend = () => { 
    isRecording = false; 
    updateStatus('Idle'); 
    startBtn.disabled = false; 
    showMic(false); 
  };

  recognition.onresult = async (event) => {
    let interim = '';
    let final = '';
    for (let i = event.resultIndex; i < event.results.length; i++){
      const res = event.results[i];
      if (res.isFinal) final += res[0].transcript;
      else interim += res[0].transcript;
    }

    if (interim){
      const prev = originalTextDiv.querySelector('.interim');
      if (prev) {
        prev.textContent = interim;
      } else {
        const d = document.createElement('div'); 
        d.className = 'interim text-gray-500 italic message original-message'; 
        d.textContent = interim;
        originalTextDiv.appendChild(d);
      }
      originalTextDiv.scrollTop = originalTextDiv.scrollHeight;
    }

    if (final){
      const prevInterim = originalTextDiv.querySelector('.interim');
      if (prevInterim) prevInterim.remove();

      const last = originalTextDiv.lastElementChild;
      const emojiText = addMedicalEmoji(final);
      
      if (last && last.classList.contains("final-segment")) {
        last.textContent = emojiText;
      } else {
        const d = document.createElement('div'); 
        d.className = 'final-segment message original-message'; 
        d.textContent = emojiText;
        originalTextDiv.appendChild(d);
      }
      originalTextDiv.scrollTop = originalTextDiv.scrollHeight;

      const tgtLang = tgtSelect.value;
      try {
        updateStatus('ü§ñ Translating medical terms...');
        let translated = await translateWithGemini(final, tgtLang);
        const translatedWithEmoji = addMedicalEmoji(translated);

        const lastT = translatedTextDiv.lastElementChild;
        if (lastT && lastT.classList.contains("final-segment")) {
          lastT.textContent = translatedWithEmoji;
        } else {
          const td = document.createElement('div');
          td.className = 'final-segment message translated-message';
          td.textContent = translatedWithEmoji;
          translatedTextDiv.appendChild(td);
        }

        translatedTextDiv.scrollTop = translatedTextDiv.scrollHeight;
        lastTranslatedSegment = translated;
      } catch (err) {
        const td = document.createElement('div'); 
        td.className = 'message translated-message';
        td.textContent = '‚ùå [translation failed]';
        translatedTextDiv.appendChild(td);
      } finally {
        updateStatus('üé§ Recording medical conversation...');
      }
    }
  };

  recognition.start();
}

function stopRecognition(){ if (recognition) recognition.stop(); }

/* -----------------------
   Translation (Gemini only)
   ----------------------- */
async function translateWithGemini(text, targetLang){
  const res = await fetch(
    "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=AIzaSyCJjG35a3ECknVU-vKWscq3KrLKOkrUwZs",
    {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        contents: [{
          parts: [{
            text: `Translate this medical conversation into ${targetLang}: ${text}`
          }]
        }]
      })
    }
  );
  const data = await res.json();
  return data.candidates?.[0]?.content?.parts?.[0]?.text?.trim() || "[Gemini error]";
}

/* -----------------------
   Text-to-Speech
   ----------------------- */
function speakText(text){
  // Get the appropriate TTS language based on the target language
  const tgtLang = tgtSelect.value;
  let ttsLang = 'en-US'; // Default
  
  // Map language codes to TTS languages
  const langMap = {
    'hi': 'hi-IN',
    'en': 'en-US',
    'es': 'es-ES',
    'fr': 'fr-FR',
    'zh': 'zh-CN',
    'ar': 'ar-SA'
  };
  
  ttsLang = langMap[tgtLang] || 'en-US';
  
  const utter = new SpeechSynthesisUtterance(text);
  utter.lang = ttsLang;
  speechSynthesis.cancel();
  speechSynthesis.speak(utter);
  updateStatus('üîä Speaking translation...');
}

// Generate bubbles dynamically
function generateBubbles() {
  const bubblesContainer = document.querySelector('.bubbles');
  for (let i = 0; i < 15; i++) {
    const bubble = document.createElement('div');
    bubble.classList.add('bubble');
    
    // Random properties for variety
    const size = Math.random() * 40 + 10;
    bubble.style.width = `${size}px`;
    bubble.style.height = `${size}px`;
    bubble.style.left = `${Math.random() * 100}%`;
    bubble.style.animationDuration = `${Math.random() * 10 + 10}s`;
    bubble.style.animationDelay = `${Math.random() * 5}s`;
    
    bubblesContainer.appendChild(bubble);
  }
}

// Initialize bubbles
generateBubbles();

// Emergency button functionality
document.querySelector('.emergency-btn').addEventListener('click', function() {
  alert('Emergency mode activated! This would typically connect to emergency services with location data and medical information.');
});
</script>
</body>
</html>
